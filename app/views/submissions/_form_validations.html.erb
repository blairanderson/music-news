<script type="text/javascript">
  $.validator.addMethod("youtubeVideo", function(value, element) {
    var p = /^(?:https?:\/\/)?(www\.youtube\.com|youtu\.be)\/(?=.*((\w|-){11}))(?:\S+)?$/;
    return (value.match(p)) || value === "" ? true : false;
  }, "please match format http://www.youtube.com/watch?v=abcdefghijk");

  $.validator.addMethod("soundcloudSong", function(value, element) {
    var reg = /^(?:https?:\/\/)?(soundcloud\.com|snd\.sc)\/.*/;
    return (value.match(reg)) || value === ""  ? true : false;
  }, "please match format http://soundcloud.com/artist/song OR http://snd.sc/12TJhC8");

  $.validator.addMethod("bandcampSong", function(value, element) {
      var song = /^http:\/\/.*\.bandcamp.com\/track\/\S+\S*/;
      return (value.match(song)) || value === ""  ? true : false;
    }, "please match format http://artistname.bandcamp.com/track/track-name");

  $.validator.addMethod("twitterName", function(value, element) {
      var name = /^\w*$/;
      return (value.match(name)) || value === ""  ? true : false;
    }, "please only submit the name... remove the @");

  $("#new_submission").validate({
    rules: {
      submission_title: {required: true},
      submission_body: {required: true}
    }
  });
  
  $("input#submission_twitter").rules("add", {
    required: true,
    twitterName: true
  });

  $(".youtube").rules("add", { 
    required: false,  
    youtubeVideo: true
  });

  $(".soundcloud").rules("add", { 
    required: false,  
    soundcloudSong: true
  });

  $(".bandcamp").rules("add", { 
    required: false,  
    bandcampSong: true
  });
</script>
